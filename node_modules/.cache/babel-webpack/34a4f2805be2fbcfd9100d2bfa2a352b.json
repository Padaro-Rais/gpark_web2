{"ast":null,"code":"import { EventEmitter } from \"@angular/core\";\nimport { createStateful, createSubject } from \"../../../../../rxjs/helpers\";\nimport { map, switchMap, takeUntil, tap } from \"rxjs/operators\";\nimport { getResponseDataFromHttpResponse, httpHost } from \"../../../../../http/helpers\";\nimport { isArray, isEmpty } from \"lodash\";\nimport { controlBindingsSetter } from \"../../../core/helpers\";\nimport { doLog } from \"../../../../../rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/input-type.service\";\nimport * as i2 from \"../../../../../http/core\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@clr/angular\";\nimport * as i5 from \"@ng-select/ng-select\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@ngx-translate/core\";\nimport * as i8 from \"../../pipes/safe-html.pipe\";\n\nfunction DynamicSelectInputComponent_label_1_small_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 5);\n    i0.ɵɵtext(1, \" (*) \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DynamicSelectInputComponent_label_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\", 3);\n    i0.ɵɵtext(1);\n    i0.ɵɵtemplate(2, DynamicSelectInputComponent_label_1_small_2_Template, 2, 0, \"small\", 4);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"for\", ctx_r0.inputType.asSelectInput(ctx_r0.inputConfig).formControlName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.inputType.asSelectInput(ctx_r0.inputConfig).label, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.inputType.asSelectInput(ctx_r0.inputConfig).rules == null ? null : ctx_r0.inputType.asSelectInput(ctx_r0.inputConfig).rules.isRequired);\n  }\n}\n\nfunction DynamicSelectInputComponent_ng_container_2_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"label\", 8);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"uppercase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r7 = ctx.item;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, item_r7 == null ? null : item_r7.name), \" \");\n  }\n}\n\nconst _c0 = function () {\n  return [];\n};\n\nfunction DynamicSelectInputComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ng-select\", 6);\n    i0.ɵɵlistener(\"focus\", function DynamicSelectInputComponent_ng_container_2_Template_ng_select_focus_1_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.onFocus();\n    })(\"remove\", function DynamicSelectInputComponent_ng_container_2_Template_ng_select_remove_1_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.multiSelectItemRemove.emit($event);\n    })(\"change\", function DynamicSelectInputComponent_ng_container_2_Template_ng_select_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.selected.emit({\n        name: ctx_r13.inputConfig.formControlName,\n        value: $event\n      });\n    });\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵtemplate(3, DynamicSelectInputComponent_ng_container_2_ng_template_3_Template, 4, 3, \"ng-template\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const vm_r5 = ctx.ngIf;\n    const ctx_r1 = i0.ɵɵnextContext();\n    let tmp_2_0;\n    let tmp_5_0;\n    let tmp_7_0;\n    let tmp_8_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap((ctx_r1.inputConfig == null ? null : ctx_r1.inputConfig.multiple) ? \"\" : \"not-multiple\");\n    i0.ɵɵproperty(\"virtualScroll\", true)(\"items\", (tmp_2_0 = vm_r5 == null ? null : vm_r5.state) !== null && tmp_2_0 !== undefined ? tmp_2_0 : i0.ɵɵpureFunction0(15, _c0))(\"bindLabel\", \"name\")(\"bindValue\", \"value\")(\"loading\", (tmp_5_0 = vm_r5 == null ? null : vm_r5.performingAction) !== null && tmp_5_0 !== undefined ? tmp_5_0 : false)(\"loadingText\", i0.ɵɵpipeBind1(2, 13, \"loadingText\"))(\"multiple\", (tmp_7_0 = ctx_r1.inputConfig.multiple) !== null && tmp_7_0 !== undefined ? tmp_7_0 : false)(\"placeholder\", (tmp_8_0 = ctx_r1.inputConfig.placeholder) !== null && tmp_8_0 !== undefined ? tmp_8_0 : \"\")(\"formControl\", ctx_r1.control)(\"groupBy\", \"type\")(\"clearable\", true);\n  }\n}\n\nfunction DynamicSelectInputComponent_clr_control_error_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"clr-control-error\", 9);\n    i0.ɵɵelement(1, \"span\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"translate\", \"validation.required\");\n  }\n}\n\nfunction DynamicSelectInputComponent_clr_control_helper_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"clr-control-helper\");\n    i0.ɵɵelement(1, \"span\", 11);\n    i0.ɵɵpipe(2, \"safeHtml\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(2, 1, ctx_r3.inputConfig.descriptionText), i0.ɵɵsanitizeHtml);\n  }\n}\n\nexport class DynamicSelectInputComponent {\n  constructor(inputType, client, path, host) {\n    this.inputType = inputType;\n    this.client = client;\n    this.controlDivContainerClass = \"clr-form-control\";\n    this.showLabelAndDescription = true; // tslint:disable-next-line: variable-name\n\n    this._performingAction$ = createStateful(false); // tslint:disable-next-line: variable-name\n\n    this._inputItems$ = createStateful({\n      performingAction: false,\n      state: []\n    });\n    this.inputItems$ = this._inputItems$.asObservable();\n    this.multiSelectItemRemove = new EventEmitter();\n    this.selected = new EventEmitter(); // tslint:disable-next-line: variable-name\n\n    this._controlFocusEvent$ = createSubject();\n    this._actionSubject$ = createStateful(false);\n    this.performingAction$ = this._actionSubject$.asObservable(); // tslint:disable-next-line: variable-name\n\n    this._destroy$ = createSubject();\n\n    this._controlFocusEvent$.pipe(tap(state => {\n      this._inputItems$.next(Object.assign(Object.assign({}, state), {\n        performingAction: true\n      }));\n\n      this._actionSubject$.next(true);\n    }), switchMap(() => this.client.get(`${httpHost(host)}/${path}`, {\n      params: {\n        table_config: this._inputConfig.serverBindings\n      }\n    }).pipe(doLog(\"Load binding result: \"), map(state => {\n      const data = getResponseDataFromHttpResponse(state);\n\n      if (data && isArray(data)) {\n        return controlBindingsSetter(data)(this._inputConfig).items;\n      }\n\n      return [];\n    }), takeUntil(this._destroy$), tap(state => {\n      this._inputItems$.next({\n        performingAction: false,\n        state\n      });\n\n      this._actionSubject$.next(false);\n    })))).subscribe();\n  }\n\n  set control(value) {\n    this._control = value;\n  }\n\n  get control() {\n    return this._control;\n  }\n\n  set inputItems(value) {\n    this._inputItems$.next({\n      performingAction: false,\n      state: value\n    });\n  }\n\n  set inputConfig(value) {\n    this._inputConfig = value;\n  } // tslint:disable-next-line: typedef\n\n\n  get inputConfig() {\n    return this._inputConfig;\n  }\n\n  onFocus() {\n    const {\n      state\n    } = this._inputItems$.getValue();\n\n    if (!(typeof state !== \"undefined\" && state !== null) || isEmpty(state) && this._inputConfig.serverBindings) {\n      // Load the data from the remote server\n      this._controlFocusEvent$.next({\n        state\n      });\n    }\n  }\n\n  ngOnDestroy() {\n    this._destroy$.next({});\n  }\n\n}\n\nDynamicSelectInputComponent.ɵfac = function DynamicSelectInputComponent_Factory(t) {\n  return new (t || DynamicSelectInputComponent)(i0.ɵɵdirectiveInject(i1.DynamicInputTypeHelper), i0.ɵɵdirectiveInject(i2.DrewlabsRessourceServerClient), i0.ɵɵdirectiveInject(\"CONTROL_BINDINGS_RESOURCES_PATH\"), i0.ɵɵdirectiveInject(\"FORM_SERVER_HOST\"));\n};\n\nDynamicSelectInputComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DynamicSelectInputComponent,\n  selectors: [[\"app-dynamic-select-input\"]],\n  inputs: {\n    controlDivContainerClass: \"controlDivContainerClass\",\n    control: \"control\",\n    showLabelAndDescription: \"showLabelAndDescription\",\n    inputItems: \"inputItems\",\n    inputConfig: \"inputConfig\"\n  },\n  outputs: {\n    multiSelectItemRemove: \"multiSelectItemRemove\",\n    selected: \"selected\"\n  },\n  decls: 6,\n  vars: 8,\n  consts: [[\"class\", \"clr-control-label\", 3, \"for\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"field-has-error\", 4, \"ngIf\"], [1, \"clr-control-label\", 3, \"for\"], [\"class\", \"required-text\", 4, \"ngIf\"], [1, \"required-text\"], [3, \"virtualScroll\", \"items\", \"bindLabel\", \"bindValue\", \"loading\", \"loadingText\", \"multiple\", \"placeholder\", \"formControl\", \"groupBy\", \"clearable\", \"focus\", \"remove\", \"change\"], [\"ng-option-tmp\", \"\"], [1, \"form-check-label\", \"ml-2\"], [1, \"field-has-error\"], [3, \"translate\"], [3, \"innerHTML\"]],\n  template: function DynamicSelectInputComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\");\n      i0.ɵɵtemplate(1, DynamicSelectInputComponent_label_1_Template, 3, 3, \"label\", 0);\n      i0.ɵɵtemplate(2, DynamicSelectInputComponent_ng_container_2_Template, 4, 16, \"ng-container\", 1);\n      i0.ɵɵpipe(3, \"async\");\n      i0.ɵɵtemplate(4, DynamicSelectInputComponent_clr_control_error_4_Template, 2, 1, \"clr-control-error\", 2);\n      i0.ɵɵtemplate(5, DynamicSelectInputComponent_clr_control_helper_5_Template, 3, 3, \"clr-control-helper\", 1);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵclassMap(ctx.controlDivContainerClass);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showLabelAndDescription);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(3, 6, ctx.inputItems$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.control.hasError(\"required\") && ctx.control.touched);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.inputConfig.descriptionText && ctx.showLabelAndDescription);\n    }\n  },\n  directives: [i3.NgIf, i4.ClrLabel, i5.NgSelectComponent, i6.NgControlStatus, i6.FormControlDirective, i5.ɵf, i4.ClrControlError, i7.TranslateDirective, i4.ClrControlHelper],\n  pipes: [i3.AsyncPipe, i7.TranslatePipe, i3.UpperCasePipe, i8.SafeHTMLPipe],\n  styles: [\".ng-select[_ngcontent-%COMP%], [_nghost-%COMP%]     .ng-select{display:block;max-width:100%!important;width:100%;border-bottom-color:var(--clr-forms-border-color, #b3b3b3)}.ng-select.flat[_ngcontent-%COMP%]{border-radius:0!important}.ng-select.flat[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{border-radius:0!important}.required-text[_ngcontent-%COMP%], .field-has-error[_ngcontent-%COMP%]{color:#f13232}.clr-input-wrapper[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]:disabled{background:rgba(244,244,244,.3)}[_nghost-%COMP%]     .ng-select .ng-select-container, [_nghost-%COMP%]     .ng-select.ng-select-single .ng-select-container{min-height:26px}[_nghost-%COMP%]     .ng-select.ng-select-single .ng-select-container{height:26px}\"]\n});","map":{"version":3,"sources":["C:/Users/HK/Desktop/LIK_PROJECT/archiLik/Archive_Lik_Angular/src/app/core/components/dynamic-inputs/angular/components/dynamic-select-input/dynamic-select-input.component.ts"],"names":["EventEmitter","createStateful","createSubject","map","switchMap","takeUntil","tap","getResponseDataFromHttpResponse","httpHost","isArray","isEmpty","controlBindingsSetter","doLog","i0","i1","i2","i3","i4","i5","i6","i7","i8","DynamicSelectInputComponent_label_1_small_2_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","DynamicSelectInputComponent_label_1_Template","ɵɵtemplate","ctx_r0","ɵɵnextContext","ɵɵproperty","inputType","asSelectInput","inputConfig","formControlName","ɵɵadvance","ɵɵtextInterpolate1","label","rules","isRequired","DynamicSelectInputComponent_ng_container_2_ng_template_3_Template","ɵɵpipe","item_r7","item","ɵɵpipeBind1","name","_c0","DynamicSelectInputComponent_ng_container_2_Template","_r11","ɵɵgetCurrentView","ɵɵelementContainerStart","ɵɵlistener","DynamicSelectInputComponent_ng_container_2_Template_ng_select_focus_1_listener","ɵɵrestoreView","ctx_r10","onFocus","DynamicSelectInputComponent_ng_container_2_Template_ng_select_remove_1_listener","$event","ctx_r12","multiSelectItemRemove","emit","DynamicSelectInputComponent_ng_container_2_Template_ng_select_change_1_listener","ctx_r13","selected","value","ɵɵelementContainerEnd","vm_r5","ngIf","ctx_r1","tmp_2_0","tmp_5_0","tmp_7_0","tmp_8_0","ɵɵclassMap","multiple","state","undefined","ɵɵpureFunction0","performingAction","placeholder","control","DynamicSelectInputComponent_clr_control_error_4_Template","ɵɵelement","DynamicSelectInputComponent_clr_control_helper_5_Template","ctx_r3","descriptionText","ɵɵsanitizeHtml","DynamicSelectInputComponent","constructor","client","path","host","controlDivContainerClass","showLabelAndDescription","_performingAction$","_inputItems$","inputItems$","asObservable","_controlFocusEvent$","_actionSubject$","performingAction$","_destroy$","pipe","next","Object","assign","get","params","table_config","_inputConfig","serverBindings","data","items","subscribe","_control","inputItems","getValue","ngOnDestroy","ɵfac","DynamicSelectInputComponent_Factory","t","ɵɵdirectiveInject","DynamicInputTypeHelper","DrewlabsRessourceServerClient","ɵcmp","ɵɵdefineComponent","type","selectors","inputs","outputs","decls","vars","consts","template","DynamicSelectInputComponent_Template","hasError","touched","directives","NgIf","ClrLabel","NgSelectComponent","NgControlStatus","FormControlDirective","ɵf","ClrControlError","TranslateDirective","ClrControlHelper","pipes","AsyncPipe","TranslatePipe","UpperCasePipe","SafeHTMLPipe","styles"],"mappings":"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","sourcesContent":["import { EventEmitter, } from \"@angular/core\";\r\nimport { createStateful, createSubject } from \"../../../../../rxjs/helpers\";\r\nimport { map, switchMap, takeUntil, tap } from \"rxjs/operators\";\r\nimport { getResponseDataFromHttpResponse, httpHost, } from \"../../../../../http/helpers\";\r\nimport { isArray, isEmpty } from \"lodash\";\r\nimport { controlBindingsSetter } from \"../../../core/helpers\";\r\nimport { doLog } from \"../../../../../rxjs/operators\";\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"../../services/input-type.service\";\r\nimport * as i2 from \"../../../../../http/core\";\r\nimport * as i3 from \"@angular/common\";\r\nimport * as i4 from \"@clr/angular\";\r\nimport * as i5 from \"@ng-select/ng-select\";\r\nimport * as i6 from \"@angular/forms\";\r\nimport * as i7 from \"@ngx-translate/core\";\r\nimport * as i8 from \"../../pipes/safe-html.pipe\";\r\nfunction DynamicSelectInputComponent_label_1_small_2_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"small\", 5);\r\n    i0.ɵɵtext(1, \" (*) \");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction DynamicSelectInputComponent_label_1_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"label\", 3);\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵtemplate(2, DynamicSelectInputComponent_label_1_small_2_Template, 2, 0, \"small\", 4);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r0 = i0.ɵɵnextContext();\r\n    i0.ɵɵproperty(\"for\", ctx_r0.inputType.asSelectInput(ctx_r0.inputConfig).formControlName);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.inputType.asSelectInput(ctx_r0.inputConfig).label, \" \");\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.inputType.asSelectInput(ctx_r0.inputConfig).rules == null ? null : ctx_r0.inputType.asSelectInput(ctx_r0.inputConfig).rules.isRequired);\r\n} }\r\nfunction DynamicSelectInputComponent_ng_container_2_ng_template_3_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵelementStart(1, \"label\", 8);\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵpipe(3, \"uppercase\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const item_r7 = ctx.item;\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, item_r7 == null ? null : item_r7.name), \" \");\r\n} }\r\nconst _c0 = function () { return []; };\r\nfunction DynamicSelectInputComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {\r\n    const _r11 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementContainerStart(0);\r\n    i0.ɵɵelementStart(1, \"ng-select\", 6);\r\n    i0.ɵɵlistener(\"focus\", function DynamicSelectInputComponent_ng_container_2_Template_ng_select_focus_1_listener() { i0.ɵɵrestoreView(_r11); const ctx_r10 = i0.ɵɵnextContext(); return ctx_r10.onFocus(); })(\"remove\", function DynamicSelectInputComponent_ng_container_2_Template_ng_select_remove_1_listener($event) { i0.ɵɵrestoreView(_r11); const ctx_r12 = i0.ɵɵnextContext(); return ctx_r12.multiSelectItemRemove.emit($event); })(\"change\", function DynamicSelectInputComponent_ng_container_2_Template_ng_select_change_1_listener($event) { i0.ɵɵrestoreView(_r11); const ctx_r13 = i0.ɵɵnextContext(); return ctx_r13.selected.emit({ name: ctx_r13.inputConfig.formControlName, value: $event }); });\r\n    i0.ɵɵpipe(2, \"translate\");\r\n    i0.ɵɵtemplate(3, DynamicSelectInputComponent_ng_container_2_ng_template_3_Template, 4, 3, \"ng-template\", 7);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementContainerEnd();\r\n} if (rf & 2) {\r\n    const vm_r5 = ctx.ngIf;\r\n    const ctx_r1 = i0.ɵɵnextContext();\r\n    let tmp_2_0;\r\n    let tmp_5_0;\r\n    let tmp_7_0;\r\n    let tmp_8_0;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵclassMap((ctx_r1.inputConfig == null ? null : ctx_r1.inputConfig.multiple) ? \"\" : \"not-multiple\");\r\n    i0.ɵɵproperty(\"virtualScroll\", true)(\"items\", (tmp_2_0 = vm_r5 == null ? null : vm_r5.state) !== null && tmp_2_0 !== undefined ? tmp_2_0 : i0.ɵɵpureFunction0(15, _c0))(\"bindLabel\", \"name\")(\"bindValue\", \"value\")(\"loading\", (tmp_5_0 = vm_r5 == null ? null : vm_r5.performingAction) !== null && tmp_5_0 !== undefined ? tmp_5_0 : false)(\"loadingText\", i0.ɵɵpipeBind1(2, 13, \"loadingText\"))(\"multiple\", (tmp_7_0 = ctx_r1.inputConfig.multiple) !== null && tmp_7_0 !== undefined ? tmp_7_0 : false)(\"placeholder\", (tmp_8_0 = ctx_r1.inputConfig.placeholder) !== null && tmp_8_0 !== undefined ? tmp_8_0 : \"\")(\"formControl\", ctx_r1.control)(\"groupBy\", \"type\")(\"clearable\", true);\r\n} }\r\nfunction DynamicSelectInputComponent_clr_control_error_4_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"clr-control-error\", 9);\r\n    i0.ɵɵelement(1, \"span\", 10);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"translate\", \"validation.required\");\r\n} }\r\nfunction DynamicSelectInputComponent_clr_control_helper_5_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"clr-control-helper\");\r\n    i0.ɵɵelement(1, \"span\", 11);\r\n    i0.ɵɵpipe(2, \"safeHtml\");\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r3 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(2, 1, ctx_r3.inputConfig.descriptionText), i0.ɵɵsanitizeHtml);\r\n} }\r\nexport class DynamicSelectInputComponent {\r\n    constructor(inputType, client, path, host) {\r\n        this.inputType = inputType;\r\n        this.client = client;\r\n        this.controlDivContainerClass = \"clr-form-control\";\r\n        this.showLabelAndDescription = true;\r\n        // tslint:disable-next-line: variable-name\r\n        this._performingAction$ = createStateful(false);\r\n        // tslint:disable-next-line: variable-name\r\n        this._inputItems$ = createStateful({\r\n            performingAction: false,\r\n            state: [],\r\n        });\r\n        this.inputItems$ = this._inputItems$.asObservable();\r\n        this.multiSelectItemRemove = new EventEmitter();\r\n        this.selected = new EventEmitter();\r\n        // tslint:disable-next-line: variable-name\r\n        this._controlFocusEvent$ = createSubject();\r\n        this._actionSubject$ = createStateful(false);\r\n        this.performingAction$ = this._actionSubject$.asObservable();\r\n        // tslint:disable-next-line: variable-name\r\n        this._destroy$ = createSubject();\r\n        this._controlFocusEvent$\r\n            .pipe(tap((state) => {\r\n            this._inputItems$.next(Object.assign(Object.assign({}, state), { performingAction: true }));\r\n            this._actionSubject$.next(true);\r\n        }), switchMap(() => this.client\r\n            .get(`${httpHost(host)}/${path}`, {\r\n            params: {\r\n                table_config: this._inputConfig.serverBindings,\r\n            },\r\n        })\r\n            .pipe(doLog(\"Load binding result: \"), map((state) => {\r\n            const data = getResponseDataFromHttpResponse(state);\r\n            if (data && isArray(data)) {\r\n                return controlBindingsSetter(data)(this._inputConfig)\r\n                    .items;\r\n            }\r\n            return [];\r\n        }), takeUntil(this._destroy$), tap((state) => {\r\n            this._inputItems$.next({ performingAction: false, state });\r\n            this._actionSubject$.next(false);\r\n        }))))\r\n            .subscribe();\r\n    }\r\n    set control(value) {\r\n        this._control = value;\r\n    }\r\n    get control() {\r\n        return this._control;\r\n    }\r\n    set inputItems(value) {\r\n        this._inputItems$.next({ performingAction: false, state: value });\r\n    }\r\n    set inputConfig(value) {\r\n        this._inputConfig = value;\r\n    }\r\n    // tslint:disable-next-line: typedef\r\n    get inputConfig() {\r\n        return this._inputConfig;\r\n    }\r\n    onFocus() {\r\n        const { state } = this._inputItems$.getValue();\r\n        if (!(typeof state !== \"undefined\" && state !== null) ||\r\n            (isEmpty(state) && this._inputConfig.serverBindings)) {\r\n            // Load the data from the remote server\r\n            this._controlFocusEvent$.next({ state });\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        this._destroy$.next({});\r\n    }\r\n}\r\nDynamicSelectInputComponent.ɵfac = function DynamicSelectInputComponent_Factory(t) { return new (t || DynamicSelectInputComponent)(i0.ɵɵdirectiveInject(i1.DynamicInputTypeHelper), i0.ɵɵdirectiveInject(i2.DrewlabsRessourceServerClient), i0.ɵɵdirectiveInject(\"CONTROL_BINDINGS_RESOURCES_PATH\"), i0.ɵɵdirectiveInject(\"FORM_SERVER_HOST\")); };\r\nDynamicSelectInputComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: DynamicSelectInputComponent, selectors: [[\"app-dynamic-select-input\"]], inputs: { controlDivContainerClass: \"controlDivContainerClass\", control: \"control\", showLabelAndDescription: \"showLabelAndDescription\", inputItems: \"inputItems\", inputConfig: \"inputConfig\" }, outputs: { multiSelectItemRemove: \"multiSelectItemRemove\", selected: \"selected\" }, decls: 6, vars: 8, consts: [[\"class\", \"clr-control-label\", 3, \"for\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"field-has-error\", 4, \"ngIf\"], [1, \"clr-control-label\", 3, \"for\"], [\"class\", \"required-text\", 4, \"ngIf\"], [1, \"required-text\"], [3, \"virtualScroll\", \"items\", \"bindLabel\", \"bindValue\", \"loading\", \"loadingText\", \"multiple\", \"placeholder\", \"formControl\", \"groupBy\", \"clearable\", \"focus\", \"remove\", \"change\"], [\"ng-option-tmp\", \"\"], [1, \"form-check-label\", \"ml-2\"], [1, \"field-has-error\"], [3, \"translate\"], [3, \"innerHTML\"]], template: function DynamicSelectInputComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\");\r\n        i0.ɵɵtemplate(1, DynamicSelectInputComponent_label_1_Template, 3, 3, \"label\", 0);\r\n        i0.ɵɵtemplate(2, DynamicSelectInputComponent_ng_container_2_Template, 4, 16, \"ng-container\", 1);\r\n        i0.ɵɵpipe(3, \"async\");\r\n        i0.ɵɵtemplate(4, DynamicSelectInputComponent_clr_control_error_4_Template, 2, 1, \"clr-control-error\", 2);\r\n        i0.ɵɵtemplate(5, DynamicSelectInputComponent_clr_control_helper_5_Template, 3, 3, \"clr-control-helper\", 1);\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵclassMap(ctx.controlDivContainerClass);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.showLabelAndDescription);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(3, 6, ctx.inputItems$));\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.control.hasError(\"required\") && ctx.control.touched);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.inputConfig.descriptionText && ctx.showLabelAndDescription);\r\n    } }, directives: [i3.NgIf, i4.ClrLabel, i5.NgSelectComponent, i6.NgControlStatus, i6.FormControlDirective, i5.ɵf, i4.ClrControlError, i7.TranslateDirective, i4.ClrControlHelper], pipes: [i3.AsyncPipe, i7.TranslatePipe, i3.UpperCasePipe, i8.SafeHTMLPipe], styles: [\".ng-select[_ngcontent-%COMP%], [_nghost-%COMP%]     .ng-select{display:block;max-width:100%!important;width:100%;border-bottom-color:var(--clr-forms-border-color, #b3b3b3)}.ng-select.flat[_ngcontent-%COMP%]{border-radius:0!important}.ng-select.flat[_ngcontent-%COMP%]   .ng-select-container[_ngcontent-%COMP%]{border-radius:0!important}.required-text[_ngcontent-%COMP%], .field-has-error[_ngcontent-%COMP%]{color:#f13232}.clr-input-wrapper[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]:disabled{background:rgba(244,244,244,.3)}[_nghost-%COMP%]     .ng-select .ng-select-container, [_nghost-%COMP%]     .ng-select.ng-select-single .ng-select-container{min-height:26px}[_nghost-%COMP%]     .ng-select.ng-select-single .ng-select-container{height:26px}\"] });\r\n"]},"metadata":{},"sourceType":"module"}